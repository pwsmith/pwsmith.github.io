I"®)<p>In this post I will show how to make a fully formatted citation list if you have made slides in reveal.js.
This is useful if you are giving an academic presentation with the slides, and want to follow the convention of giving a short citation note in the slide, with the full information at the end.</p>

<h2 id="why">Why?</h2>

<p>One of the drawbacks of revealjs, that I noted <a href="/2020/01/11/reveal.js-for-linguistics/">in the overview</a> is that there is no native way of making a citation list in html.
That is, there is no equivalent of bibtex/biblatex that will automatically scan your file for citation keys, and output a formatted list of references at the end of your document based upon what it finds.
In the same post, I outlined why I donâ€™t think that this is a problem in and of itself â€” a reference list is effectively a way of pointing someone w=viewing your slides to a source, and there are html-based ways of doing that, such as making a hyperlink using the <code class="highlighter-rouge">&lt;a&gt;...&lt;/a&gt;</code> tag, which if clicked will take the reader to the source.
Yet, despite some positives, there are a couple of drawbacks: unpublished work that is not associated with a url is difficult to incorporate, and, whilst it is easy to click on links if you are viewing the slides at a later point, if you are in the audience at the talk and donâ€™t have online access to the slides, then you canâ€™t check which exact source is being used.<sup id="fnref:host"><a href="#fn:host" class="footnote">1</a></sup>
It is also a convention of academia that one provides references as well, so it is understandable to want a formatted list at the end.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>This method requires use of the command line and the ability to run a python script.
So, you should have a basic knowledge of the command line on your computer (nothing complex, but how to open the terminal, how to navigate to a directory, and how to put in basic commands), as well as having <a href="https://www.python.org/">Python</a> installed.
Furthermore, we will be using <a href="https://pandoc.org">Pandoc</a> to generate the citation list.</p>

<h3 id="install-python">Install Python</h3>

<p>You can check if Python is already installed on your computer by typing into the command line:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python --version
</code></pre></div></div>

<p>If the output gives (with the value of X depending on what version is installed on your system), then youâ€™re good.<sup id="fnref:python2"><a href="#fn:python2" class="footnote">2</a></sup></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Python 3.X.X
</code></pre></div></div>

<p>Note that if you are using a Mac, itâ€™s likely that youâ€™ll have both Python 2 and Python 3 installed.<sup id="fnref:windows"><a href="#fn:windows" class="footnote">3</a></sup>
You can check if Python 3 is available on your system by typing:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 --version
</code></pre></div></div>

<p>If this is the case, then wherever I use the command <code class="highlighter-rouge">python</code> in this guide, you should replace it with <code class="highlighter-rouge">python3</code>.
If you receive a notice <code class="highlighter-rouge">command not found: python</code>, then you need to <a href="https://www.python.org/downloads/">install python</a>.</p>

<h3 id="install-pandoc">Install Pandoc</h3>

<p>Pandoc is a command line tool useful for converting documents from one file type to another.
Instructions for installing it on a variety of systems can be found <a href="https://pandoc.org/installing.html">here</a>.<sup id="fnref:pandocinstall"><a href="#fn:pandocinstall" class="footnote">4</a></sup></p>

<h3 id="bibliography">Bibliography</h3>

<p>Finally, youâ€™l need a LaTeX style bibliography.</p>

<h2 id="step-1-incorporating-citation-keys">Step 1: Incorporating citation keys</h2>

<p>The first step is to incorporate citation keys within the document.
In <a href="/2020/01/11/reveal.js-for-linguistics/">my overview</a>, I noted that given that reveal.js makes slide decks that are web-based, it makes sense to make use of this and cite other works as a hyperlink where possible, to take the reader right to the selected work.
I will take this approach here.
Given that the slides are written in html, we will be using the <code class="highlighter-rouge">&lt;a&gt;...&lt;/a&gt;</code> tag, where (the <code class="highlighter-rouge">href</code> value is set to the webpage of the citation, and the text between the tags is what you want displayed on the slide).</p>

<p>In order to eventually access the bibliography entry for the citation, one should also incorporate a citation key using <code class="highlighter-rouge">data-citation-key="CITEKEY-IN-BIBLIO"</code>.<sup id="fnref:name-of-citekey"><a href="#fn:name-of-citekey" class="footnote">5</a></sup> 
The <code class="highlighter-rouge">data</code> attributes in html allows one to define additional information for the citation tag.
A basic citation would then look like the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;a href="https://www.glossa-journal.org/article/10.5334/gjgl.362/" data-citation-key="moskal2018"&gt;Moskal (2018)&lt;/a&gt;
</code></pre></div></div>

<p>The addition of the citation key will eventually allow us to use Pandoc to access generate a bibliography from the citation keys.</p>

<p><strong>Important</strong>: the value that you add for <code class="highlighter-rouge">data-citation-key</code> <em>must</em> match the citation key in your .bib file.</p>

<h2 id="step-2-extracting-the-citation-keys">Step 2: Extracting the citation keys</h2>

<p>Once all of the citation keys are in the html document, they need to be extracted so that there is a list containing all the citation keys that you want to then be references.
We will use Python for this step. 
The script we make should do two things:</p>
<ol>
  <li>Be able to be called from the command line, so we can run it with the command <code class="highlighter-rouge">python refgrab.py PRESENTATION.html</code>. That way, itâ€™s not necessary to change the python script for every presentation.</li>
  <li>Make a list of the citations keys in our presentation document that can serve as the input to Pandoc.</li>
</ol>

<p>For the first step, we will use the <code class="highlighter-rouge">sys</code> library in python, which should already be present in your Python installation. 
Make a file called refgrab.py (or whatever name you want), and insert the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys

file = sys.argv[1]
</code></pre></div></div>

<p>In order to extract the citation keys we will use <a href="https://www.crummy.com/software/BeautifulSoup/">Beautiful Soup</a>, which is a Python library for processing the html code underlying web pages.
Firstly, install Beautiful Soup on your system using the following at the command line:<sup id="fnref:pip3"><a href="#fn:pip3" class="footnote">6</a></sup></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install --user beautifulsoup4
</code></pre></div></div>

<p>After this, change the refgrab.py file so that it looks like the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys
from bs4 import BeautifulSoup

file = sys.argv[1]

with open(file, "r") as fp:
    soup = BeautifulSoup(fp)

# f = open(file, "r")

for link in soup.find_all('a'):
    print(link.get('data-citation-key'))
</code></pre></div></div>

<p>What the new lines do is:</p>
<ol>
  <li>Imports the Beautiful Soup library.</li>
  <li>Scans the file picked out by <code class="highlighter-rouge">sys.argv[1]</code>, looks for all <code class="highlighter-rouge">&lt;a&gt;</code> elements and returns a list of each value of <code class="highlighter-rouge">data-citation-key</code> associated with each <code class="highlighter-rouge">&lt;a&gt;</code>.
This list is what we will use to build our reference list.</li>
</ol>

<h2 id="making-the-reference-list">Making the reference list</h2>

<h2 id="notes">Notes</h2>
<div class="footnotes">
  <ol>
    <li id="fn:host">
      <p>That said, if you use reveal.js to make slides, then it makes sense to host the slides online, say for instance on Github Pages, and give the audience a link at the beginning of the talk.Â <a href="#fnref:host" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:python2">
      <p>If you get the response:<code class="highlighter-rouge">Python 2.X.X</code>, then you should consider upgrading Python. Python 2 is <a href="http://pyfound.blogspot.com/2019/12/python-2-sunset.html?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+PythonSoftwareFoundationNews+%28Python+Software+Foundation+News%29">in the process of being deprecated</a>, and will no longer be stable after April 2020.Â <a href="#fnref:python2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:windows">
      <p>This may also be the case for Windows, but I donâ€™t know.Â <a href="#fnref:windows" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:pandocinstall">
      <p>If youâ€™re using Linux, then pandoc can be installed using various package managers, but be aware that you should upgrade the package to the latest version after installation, as older versions are often installed. Iâ€™m assuming that for this guide, the latest version is installed on your system, which at the time of writing is <code class="highlighter-rouge">pandoc 2.8</code>Â <a href="#fnref:pandocinstall" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:name-of-citekey">
      <p>The only thing that is important here is the prefix <code class="highlighter-rouge">data</code>; <code class="highlighter-rouge">-citation-key</code> is used as its semantically easy to follow. However, one can use whatever you want, e.g. <code class="highlighter-rouge">data-key</code>, <code class="highlighter-rouge">data-citation</code>, <code class="highlighter-rouge">data-ref</code>.Â <a href="#fnref:name-of-citekey" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:pip3">
      <p>If you are using a Mac with both Python 2 and Python 3 installed, you should use pip3 instead of pip.Â <a href="#fnref:pip3" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
:ET